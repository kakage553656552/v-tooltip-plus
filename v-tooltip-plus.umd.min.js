!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue"),require("element-ui")):"function"==typeof define&&define.amd?define(["vue","element-ui"],t):"object"==typeof exports?exports.VTooltipPlus=t(require("vue"),require("element-ui")):e.VTooltipPlus=t(e.Vue,e.ElementUI)}(this,((e,t)=>(()=>{"use strict";var o={173:e=>{e.exports=t},594:t=>{t.exports=e}},l={};function n(e){var t=l[e];if(void 0!==t)return t.exports;var i=l[e]={exports:{}};return o[e](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};n.d(i,{default:()=>k});var r=n(594),p=n.n(r),s=n(173),a=n.n(s);let c=null;const d=[];function u(){if(d.length>0)return d.pop();const e=document.createElement("div");(c||(c=document.createElement("div"),c.id="tooltip-container",document.body.appendChild(c)),c).appendChild(e);const t=new(p())({el:e,data:()=>({visible:!1,content:"",placement:"top",trigger:"hover",reference:null,effect:"dark",popperClass:"tooltip-popper",openDelay:0,enterable:!0}),render(e){return e(a().Tooltip,{props:{content:this.content,placement:this.placement,value:this.visible,effect:this.effect,trigger:this.trigger,visibleArrow:!0,popperClass:this.popperClass,openDelay:this.openDelay,enterable:this.enterable,appendToBody:!0},ref:"tooltip"},[e("span",{style:"display: inline-block; width:0; height:0;"})])},methods:{show(){this.visible=!0},hide(){this.visible=!1},updateReference(e){const t=this.$refs.tooltip;t&&(t.referenceElm=e,p().nextTick((()=>{if(t.updatePopper&&t.updatePopper(),t.$refs&&t.$refs.popper&&t.$refs.popper.$refs&&t.$refs.popper.$refs.popper){const e=t.$refs.popper.$refs.popper;e&&e.update&&e.update()}})))}}});return t}function f(e){try{if(!e._tooltip)return;e._tooltip.mouseenterHandler&&(e.removeEventListener("mouseenter",e._tooltip.mouseenterHandler),delete e._tooltip.mouseenterHandler),e._tooltip.mouseleaveHandler&&(e.removeEventListener("mouseleave",e._tooltip.mouseleaveHandler),delete e._tooltip.mouseleaveHandler),e._tooltip.clickHandler&&(e.removeEventListener("click",e._tooltip.clickHandler),delete e._tooltip.clickHandler),e._tooltip.documentClickHandler&&(document.removeEventListener("click",e._tooltip.documentClickHandler),delete e._tooltip.documentClickHandler),e._tooltip.focusinHandler&&(e.removeEventListener("focusin",e._tooltip.focusinHandler),delete e._tooltip.focusinHandler),e._tooltip.focusoutHandler&&(e.removeEventListener("focusout",e._tooltip.focusoutHandler),delete e._tooltip.focusoutHandler),e._tooltip.focusHandler&&(e.removeEventListener("focus",e._tooltip.focusHandler),delete e._tooltip.focusHandler),e._tooltip.blurHandler&&(e.removeEventListener("blur",e._tooltip.blurHandler),delete e._tooltip.blurHandler)}catch(e){console.error("解绑事件失败:",e)}}function v(e,t){try{e._tooltip||(e._tooltip={});let o="",l={},n="top";"object"==typeof t.value?(l=t.value,o=l.content||"",l.placement&&(n=l.placement)):"string"==typeof t.value&&(o=t.value);let i="hover";t.modifiers&&(t.modifiers.click&&(i="click"),t.modifiers.focus&&(i="focus"),t.modifiers.manual&&(i="manual"));const r=["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"];t.arg&&r.includes(t.arg)&&(n=t.arg,console.log("使用arg作为placement:",n));let s="dark";t.modifiers&&t.modifiers.light&&(s="light");const a=e._tooltip.instance||u();a.content=o,a.placement=n,a.trigger=i,a.effect=s,"object"==typeof t.value&&(void 0!==t.value.openDelay&&(a.openDelay=t.value.openDelay),void 0!==t.value.enterable&&(a.enterable=t.value.enterable),t.value.popperClass&&(a.popperClass=t.value.popperClass)),console.log("Tooltip配置:",{content:o,placement:n,trigger:i,effect:s}),p().nextTick((()=>{a.updateReference(e)})),e._tooltip.instance=a,function(e,t,o){try{if(f(e),e._tooltip||(e._tooltip={}),"hover"===o){const o=()=>{t.show()},l=()=>{t.hide()};e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",l),e._tooltip.mouseenterHandler=o,e._tooltip.mouseleaveHandler=l}else if("click"===o){const o=()=>{t.visible?t.hide():t.show()},l=o=>{e===o.target||e.contains(o.target)||t.hide()};e.addEventListener("click",o),document.addEventListener("click",l),e._tooltip.clickHandler=o,e._tooltip.documentClickHandler=l}else if("focus"===o){const o=()=>{t.show()},l=()=>{t.hide()};e.addEventListener("focusin",o),e.addEventListener("focusout",l),e.addEventListener("focus",o),e.addEventListener("blur",l),e._tooltip.focusinHandler=o,e._tooltip.focusoutHandler=l,e._tooltip.focusHandler=o,e._tooltip.blurHandler=l}}catch(e){console.error("绑定事件失败:",e)}}(e,a,i)}catch(e){console.error("设置Tooltip失败:",e)}}const h={bind(e,t){p().nextTick((()=>{v(e,t)}))},inserted(e,t){p().nextTick((()=>{e._tooltip&&e._tooltip.instance&&e._tooltip.instance.updateReference(e)}))},update(e,t){t.value!==t.oldValue&&p().nextTick((()=>{v(e,t)}))},componentUpdated(e,t){p().nextTick((()=>{e._tooltip&&e._tooltip.instance&&e._tooltip.instance.updateReference(e)}))},unbind(e){try{f(e),e._tooltip&&e._tooltip.instance&&(t=e._tooltip.instance)&&(t.hide(),d.push(t)),delete e._tooltip}catch(e){console.error("解绑Tooltip失败:",e)}var t}};window.addEventListener("beforeunload",(()=>{c&&(document.body.removeChild(c),c=null)}));const m={install(e){e.directive("tooltip",h)}};let _=null;const b=[];function w(){if(b.length>0)return b.pop();const e=document.createElement("div");return(_||(_=document.createElement("div"),_.id="tooltip-overflow-container",document.body.appendChild(_)),_).appendChild(e),new(p())({el:e,data:()=>({visible:!1,content:"",placement:"top",reference:null,popperClass:"tooltip-overflow-popper"}),render(e){return e(a().Tooltip,{props:{content:this.content,placement:this.placement,value:this.visible,effect:"dark",visibleArrow:!0,popperClass:this.popperClass,openDelay:0,manual:!0,enterable:!1,appendToBody:!0},ref:"tooltip"},[e("span",{style:"display: inline-block;width:0;height:0;"})])},methods:{show(){this.visible=!0},hide(){this.visible=!1},updateReference(e){const t=this.$refs.tooltip;t&&(t.referenceElm=e,p().nextTick((()=>{if(t.updatePopper&&t.updatePopper(),t.$refs&&t.$refs.popper&&t.$refs.popper.$refs&&t.$refs.popper.$refs.popper){const e=t.$refs.popper.$refs.popper;e&&e.update&&e.update()}})))}}})}function g(e,t){e._tooltipOverflow||(e._tooltipOverflow={});let o="";o="object"==typeof t.value&&t.value.content?t.value.content:"string"==typeof t.value?t.value:e.textContent.trim();const l=t.modifiers.vertical?"vertical":t.modifiers.both?"both":"horizontal",n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";if(!e)return!1;try{if("horizontal"===t)return Math.ceil(e.scrollWidth)>Math.ceil(e.clientWidth);if("vertical"===t)return Math.ceil(e.scrollHeight)>Math.ceil(e.clientHeight);if("both"===t)return Math.ceil(e.scrollWidth)>Math.ceil(e.clientWidth)||Math.ceil(e.scrollHeight)>Math.ceil(e.clientHeight)}catch(e){console.error("检测溢出错误:",e)}return!1}(e,l);if(n)if(e._tooltipOverflow.instance)e._tooltipOverflow.instance.content=o;else{const l=w();e._tooltipOverflow.instance=l,l.content=o,"object"==typeof t.value&&t.value.placement?l.placement=t.value.placement:t.arg&&["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"].includes(t.arg)?(l.placement=t.arg,console.log("tooltip-overflow使用arg作为placement:",l.placement)):l.placement="top",l.$refs.tooltip&&(l.$refs.tooltip.placement=l.placement);const n=()=>{if(!e._tooltipOverflow)return;const t=e._tooltipOverflow.instance;t&&(t.content=o,t.updateReference(e),t.show())},i=()=>{if(!e._tooltipOverflow)return;const t=e._tooltipOverflow.instance;t&&t.hide()};e._tooltipOverflow.showHandler=n,e._tooltipOverflow.hideHandler=i,e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",i),l.updateReference(e)}else if(e._tooltipOverflow.instance){e._tooltipOverflow.instance.hide()}}const y={bind(e,t){!function(e,t){if(e.style.overflow="hidden",e.style.textOverflow="ellipsis",t.modifiers&&t.modifiers.vertical){e.style.display="-webkit-box",e.style.webkitBoxOrient="vertical";const o=t.value&&t.value.lines?t.value.lines:1;e.style.webkitLineClamp=o}else e.style.whiteSpace="nowrap"}(e,t)},inserted(e,t){p().nextTick((()=>{g(e,t)}))},update(e,t){t.value!==t.oldValue&&p().nextTick((()=>{g(e,t)}))},componentUpdated(e,t){p().nextTick((()=>{g(e,t)}))},unbind(e){var t;e._tooltipOverflow&&(e._tooltipOverflow.showHandler&&e.removeEventListener("mouseenter",e._tooltipOverflow.showHandler),e._tooltipOverflow.hideHandler&&e.removeEventListener("mouseleave",e._tooltipOverflow.hideHandler),e._tooltipOverflow.instance&&((t=e._tooltipOverflow.instance).hide(),b.push(t)),delete e._tooltipOverflow)}};window.addEventListener("beforeunload",(()=>{_&&(document.body.removeChild(_),_=null)}));const H={install(e){e.directive("tooltip-overflow",y)}},k={install(e){e.use(m),e.use(H)}};return i=i.default})()));